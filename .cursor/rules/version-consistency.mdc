---
description:
globs:
alwaysApply: false
---
# Version Consistency Rule

## 🎯 **Critical Version Management**

**ALWAYS maintain version consistency across ALL files when ANY version change is made:**

### **1. 🚨 Primary Version Sources (MUST MATCH):**
- `js/management.js` → `this.APP_VERSION = "X.X.X - Description"`
- `index.html` → Cache busting `?v=X.X.X` 
- `manifest.json` → `"version": "X.X.X"`

### **2. 📝 Secondary References (UPDATE IMMEDIATELY):**
- `js/ux-enhancements.js` → Fallback version string
- `docs/project-management/BACKLOG.md` → Current version status
- `docs/project-management/RELEASE_NOTES.md` → Latest version entry
- `docs/deployment/DEPLOYMENT.md` → Current version info
- `README.md` → Multiple version references
- `.cursor/rules/core-context.mdc` → Version status

### **3. 🔄 Version Update Checklist:**

When updating from version X.X.X to X.X.Y:

**Step 1: Code Files**
- [ ] Update `js/management.js` → `APP_VERSION` constant
- [ ] Update `index.html` → All cache busting `?v=` parameters
- [ ] Update `manifest.json` → `version` field
- [ ] Update `js/ux-enhancements.js` → Fallback version string

**Step 2: Documentation**
- [ ] Add new version to migration check in `management.js`
- [ ] Update `docs/project-management/RELEASE_NOTES.md` with new entry
- [ ] Update `docs/project-management/BACKLOG.md` current status
- [ ] Update `docs/deployment/DEPLOYMENT.md` version references
- [ ] Update `README.md` all version displays
- [ ] Update `.cursor/rules/core-context.mdc` version status

**Step 3: Verification**
- [ ] Check Help modal shows correct version
- [ ] Check Settings shows correct version  
- [ ] Check browser cache busting works
- [ ] Check PWA manifest version updated

### **4. 🎨 Version Naming Convention:**
- **Format**: `X.Y.Z - Brief Description`
- **Examples**:
  - `5.1.5 - Documentation Organization & Cache Improvements`
  - `5.1.4+ - Streak Calculation Fix`
  - `5.2.0 - Major Feature Update`

### **5. ⚠️ Common Version Mistakes:**
- ❌ Updating cache busting but forgetting APP_VERSION
- ❌ Forgetting to add old version to migration check
- ❌ Inconsistent version descriptions across files
- ❌ Missing documentation updates
- ❌ Not verifying Help/Settings display correctly

### **6. 🤖 AI Assistant Protocol:**
**ALWAYS search for version numbers and update ALL occurrences together.**
**NEVER update just one file - version changes are GLOBAL operations.**
